<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#B8956C">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <title>AI ì„¤ê³„ - ë‹¤ë‹´ê°€êµ¬</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600&family=Noto+Serif+KR:wght@400;500&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    :root{--white:#FAFAFA;--cream:#F8F7F4;--warm:#EBE8E2;--gray:#8B8680;--charcoal:#2D2A26;--black:#1A1918;--gold:#B8956C;--gold-light:#D4B896}
    body{font-family:'Pretendard',-apple-system,BlinkMacSystemFont,system-ui,sans-serif;background:var(--white);color:var(--charcoal);line-height:1.7;-webkit-tap-highlight-color:transparent}
    h1,h2,h3,h4{font-family:'Playfair Display','Noto Serif KR',serif;font-weight:500}
    a{text-decoration:none;color:inherit}
    button{-webkit-tap-highlight-color:transparent}

    /* Navigation */
    .nav{position:fixed;top:0;left:0;right:0;z-index:100;padding:0 48px;height:72px;display:flex;align-items:center;justify-content:space-between;background:rgba(255,255,255,.97);backdrop-filter:blur(10px);box-shadow:0 1px 3px rgba(0,0,0,.08)}
    .nav-logo{display:flex;align-items:center;gap:8px;color:var(--charcoal)}
    .nav-logo svg{width:28px;height:28px}
    .nav-logo span{font-family:'Playfair Display',serif;font-size:22px}
    .nav-menu{display:flex;gap:28px}
    .nav-menu a{color:var(--charcoal);font-size:13px;letter-spacing:.5px;transition:all .3s}
    .nav-menu a:hover{opacity:.7}
    .nav-menu a.active{color:var(--gold);font-weight:500}
    .nav-icons{display:flex;align-items:center;gap:20px;color:var(--charcoal)}
    .nav-icons button{background:none;border:none;color:inherit;cursor:pointer;padding:4px}

    .hamburger{display:none;flex-direction:column;gap:5px;padding:8px;cursor:pointer;background:none;border:none}
    .hamburger span{width:24px;height:2px;background:var(--charcoal);border-radius:2px;transition:all .3s}
    .hamburger.active span:nth-child(1){transform:rotate(45deg) translate(5px,5px)}
    .hamburger.active span:nth-child(2){opacity:0}
    .hamburger.active span:nth-child(3){transform:rotate(-45deg) translate(5px,-5px)}

    .mobile-menu{position:fixed;top:64px;left:0;right:0;bottom:0;background:var(--white);z-index:99;padding:24px;display:none;flex-direction:column;gap:8px}
    .mobile-menu.active{display:flex}
    .mobile-menu a{padding:16px 20px;font-size:16px;border-radius:12px;transition:background .3s}
    .mobile-menu a:hover,.mobile-menu a.active{background:var(--cream);color:var(--gold)}

    /* Hero */
    .hero{padding:100px 48px 32px;background:linear-gradient(180deg,var(--cream) 0%,var(--white) 100%);text-align:center}
    .hero-badge{display:inline-flex;align-items:center;gap:6px;padding:6px 16px;background:rgba(184,149,108,.12);border-radius:20px;color:var(--gold);font-size:11px;letter-spacing:1.5px;text-transform:uppercase;margin-bottom:16px}
    .hero h1{font-size:36px;margin-bottom:10px}
    .hero h1 span{color:var(--gold)}
    .hero p{color:var(--gray);font-size:15px}

    .main-container{max-width:1100px;margin:0 auto;padding:0 24px 60px}

    /* Chat Box */
    .chat-box{background:var(--white);border:1px solid var(--warm);border-radius:16px;overflow:hidden;margin-bottom:32px;box-shadow:0 4px 20px rgba(0,0,0,.04)}
    .chat-header{padding:14px 20px;background:var(--cream);display:flex;align-items:center;gap:12px;border-bottom:1px solid var(--warm)}
    .chat-header-icon{width:36px;height:36px;background:linear-gradient(135deg,var(--gold),#D4A574);border-radius:10px;display:flex;align-items:center;justify-content:center;flex-shrink:0}
    .chat-header-icon svg{width:18px;height:18px;color:#fff}
    .chat-header-text h3{font-size:15px;font-family:inherit;font-weight:600}
    .chat-header-text p{font-size:11px;color:var(--gray)}
    .chat-status{margin-left:auto;display:flex;align-items:center;gap:5px;font-size:11px;color:var(--gray)}
    .chat-status::before{content:'';width:7px;height:7px;background:#4CAF50;border-radius:50%}
    .chat-messages{height:140px;padding:16px 20px;overflow-y:auto;display:flex;flex-direction:column;gap:10px;background:var(--white)}
    .message{display:flex;gap:10px;max-width:85%}
    .message.user{flex-direction:row-reverse;margin-left:auto}
    .message-avatar{width:28px;height:28px;border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0}
    .message.ai .message-avatar{background:linear-gradient(135deg,var(--gold),#D4A574)}
    .message.ai .message-avatar svg{width:14px;height:14px;color:#fff}
    .message.user .message-avatar{background:var(--charcoal)}
    .message.user .message-avatar svg{width:14px;height:14px;color:#fff}
    .message-content{padding:10px 14px;border-radius:12px;font-size:13px;line-height:1.6}
    .message.ai .message-content{background:var(--cream);border-bottom-left-radius:4px}
    .message.user .message-content{background:var(--charcoal);color:#fff;border-bottom-right-radius:4px}
    .welcome-msg{text-align:center;padding:20px;color:var(--gray);font-size:13px}
    .welcome-msg strong{color:var(--charcoal);display:block;margin-bottom:4px}
    .chat-input{padding:14px 20px;border-top:1px solid var(--warm);background:var(--cream);display:flex;gap:10px}
    .chat-input input{flex:1;padding:12px 14px;border:1px solid var(--warm);border-radius:10px;font-size:16px;background:var(--white)}
    .chat-input input:focus{outline:none;border-color:var(--gold)}
    .chat-input button{width:44px;height:44px;background:var(--charcoal);border:none;border-radius:10px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .3s;flex-shrink:0}
    .chat-input button:hover{background:var(--gold)}
    .chat-input button svg{width:18px;height:18px;color:#fff}

    /* Category Grid */
    .section-title{font-size:14px;color:var(--gray);text-transform:uppercase;letter-spacing:1.5px;margin-bottom:16px;text-align:center}
    .category-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:32px}
    .category-card{background:var(--white);border:2px solid var(--warm);border-radius:16px;padding:24px 16px;text-align:center;cursor:pointer;transition:all .3s;position:relative;overflow:hidden}
    .category-card:hover{border-color:var(--gold);transform:translateY(-4px);box-shadow:0 8px 24px rgba(184,149,108,.15)}
    .category-card:active{transform:scale(0.98)}
    .category-card.active{border-color:var(--gold);background:linear-gradient(135deg,rgba(184,149,108,.08),rgba(212,181,150,.08))}
    .category-card.has-image{border-color:var(--gold)}
    .category-icon{font-size:36px;margin-bottom:10px;display:block}
    .category-name{font-size:15px;font-weight:600;color:var(--charcoal);margin-bottom:4px}
    .category-desc{font-size:11px;color:var(--gray)}
    .category-upload-hint{position:absolute;bottom:0;left:0;right:0;padding:8px;background:var(--gold);color:#fff;font-size:11px;transform:translateY(100%);transition:transform .3s}
    .category-card:hover .category-upload-hint{transform:translateY(0)}
    .category-card.has-image .category-upload-hint{background:var(--charcoal)}
    .category-preview{width:100%;height:80px;object-fit:cover;border-radius:8px;margin-bottom:8px;display:none}
    .category-card.has-image .category-preview{display:block}
    .category-card.has-image .category-icon{display:none}
    .file-input{display:none}

    /* Style Selector */
    .style-selector{display:flex;justify-content:center;gap:10px;margin-bottom:20px;flex-wrap:wrap;padding:0 10px}
    .style-chip{padding:10px 16px;background:var(--white);border:1px solid var(--warm);border-radius:20px;font-size:13px;cursor:pointer;transition:all .3s;white-space:nowrap}
    .style-chip:hover{border-color:var(--gold)}
    .style-chip:active{transform:scale(0.95)}
    .style-chip.active{background:var(--gold);color:#fff;border-color:var(--gold)}

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ACTION BUTTONS - 2ê°œ ë²„íŠ¼
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .action-buttons{display:flex;gap:12px;justify-content:center;margin-bottom:32px;flex-wrap:wrap;padding:0 16px}
    .action-btn{flex:1;max-width:280px;padding:16px 24px;border:none;border-radius:14px;font-size:15px;font-weight:600;cursor:pointer;transition:all .3s;display:flex;align-items:center;justify-content:center;gap:8px}
    .action-btn:disabled{opacity:.6;cursor:not-allowed;transform:none}
    .action-btn .spinner{width:18px;height:18px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}

    .analyze-btn{background:var(--charcoal);color:#fff}
    .analyze-btn:hover:not(:disabled){background:#3d3a36;transform:translateY(-2px);box-shadow:0 4px 16px rgba(0,0,0,.2)}
    
    .generate-btn{background:linear-gradient(135deg,var(--gold),var(--gold-light));color:#fff;box-shadow:0 4px 16px rgba(184,149,108,.3)}
    .generate-btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 24px rgba(184,149,108,.4)}

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       WALL ANALYSIS RESULT
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .wall-analysis-section{background:var(--white);border:2px solid var(--warm);border-radius:20px;padding:24px;margin-bottom:32px;display:none}
    .wall-analysis-section.active{display:block}
    
    .wall-header{display:flex;align-items:center;gap:12px;margin-bottom:20px;padding-bottom:16px;border-bottom:1px solid var(--warm)}
    .wall-header h2{font-size:18px;display:flex;align-items:center;gap:10px}
    .wall-header .badge{padding:4px 12px;background:var(--charcoal);color:#fff;border-radius:12px;font-size:11px;font-family:sans-serif}
    
    .layout-type-display{text-align:center;padding:20px;background:linear-gradient(135deg,rgba(184,149,108,.1),rgba(212,184,150,.1));border-radius:14px;margin-bottom:20px}
    .layout-type-display .type{font-size:32px;font-weight:700;color:var(--charcoal)}
    .layout-type-display .label{font-size:12px;color:var(--gray);margin-top:4px}
    
    .wall-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}
    
    .wall-card{background:var(--cream);border-radius:12px;padding:16px}
    .wall-card h4{font-size:13px;color:var(--gold);margin-bottom:10px;display:flex;align-items:center;gap:6px;font-family:inherit}
    .wall-card p{font-size:13px;color:var(--charcoal);line-height:1.6}
    
    .walls-list{display:flex;flex-direction:column;gap:10px}
    .wall-item{background:var(--white);border-radius:10px;padding:14px;border-left:4px solid var(--gold)}
    .wall-item .position{font-weight:600;color:var(--charcoal);font-size:13px;text-transform:uppercase;margin-bottom:8px}
    .wall-item .features{display:flex;flex-wrap:wrap;gap:6px}
    .wall-item .feature{padding:4px 10px;background:var(--cream);border-radius:10px;font-size:11px;color:var(--gray)}
    .wall-item .feature.active{background:var(--gold);color:#fff}
    
    .recommendations-card{background:var(--charcoal);color:#fff;border-radius:12px;padding:16px}
    .recommendations-card h4{color:var(--gold);margin-bottom:10px}
    .recommendations-card ul{list-style:none}
    .recommendations-card li{padding:6px 0;font-size:13px;border-bottom:1px solid rgba(255,255,255,.1)}
    .recommendations-card li:last-child{border:none}
    .recommendations-card li::before{content:'âœ“';color:var(--gold);margin-right:8px}

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       DESIGN RESULT
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .result-section{background:var(--cream);border-radius:20px;padding:32px;min-height:300px}
    .result-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px;flex-wrap:wrap;gap:12px}
    .result-header h2{font-size:20px;display:flex;align-items:center;gap:10px}
    .result-header h2 span{font-size:11px;padding:4px 12px;background:var(--gold);color:#fff;border-radius:12px;font-family:sans-serif}
    .result-actions{display:flex;gap:8px}
    .result-btn{padding:10px 16px;border-radius:10px;font-size:13px;font-weight:500;cursor:pointer;transition:all .3s;display:flex;align-items:center;gap:6px}
    .result-btn.download{background:var(--charcoal);color:#fff;border:none}
    .result-btn.download:hover{background:var(--gold)}
    .result-btn.share{background:transparent;color:var(--charcoal);border:1px solid var(--charcoal)}
    .result-btn.share:hover{background:var(--charcoal);color:#fff}
    .result-btn:disabled{opacity:.5;cursor:not-allowed}

    .result-placeholder{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:60px 20px;color:var(--gray)}
    .result-placeholder .icon{font-size:64px;margin-bottom:16px;opacity:.4}
    .result-placeholder h3{font-size:18px;color:var(--charcoal);margin-bottom:8px;font-family:inherit}
    .result-placeholder p{font-size:14px;max-width:320px}
    .result-placeholder.hidden{display:none}

    .result-content{display:none}
    .result-content.active{display:block}
    .result-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}
    .result-card{background:var(--white);border-radius:16px;overflow:hidden;box-shadow:0 2px 12px rgba(0,0,0,.06)}
    .result-card-header{padding:12px 16px;background:var(--white);border-bottom:1px solid var(--warm);display:flex;align-items:center;gap:8px}
    .result-card-header .dot{width:8px;height:8px;border-radius:50%}
    .result-card-header .dot.before{background:#ef4444}
    .result-card-header .dot.after{background:#10b981}
    .result-card-header span{font-size:12px;font-weight:600;color:var(--gray);text-transform:uppercase;letter-spacing:1px}
    .result-card img{width:100%;height:280px;object-fit:cover;display:block}
    .result-main-image{grid-column:1/-1;background:var(--white);border-radius:16px;overflow:hidden;box-shadow:0 4px 20px rgba(0,0,0,.08)}
    .result-main-image img{width:100%;max-height:500px;object-fit:contain;display:block;cursor:pointer}
    .result-analysis{grid-column:1/-1;display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .analysis-card{background:var(--white);border-radius:14px;padding:20px;box-shadow:0 2px 10px rgba(0,0,0,.04)}
    .analysis-card h4{font-size:13px;color:var(--gold);margin-bottom:8px;display:flex;align-items:center;gap:6px;font-family:inherit}
    .analysis-card p{font-size:13px;color:var(--charcoal);line-height:1.7}

    .result-loading{display:none;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}
    .result-loading.active{display:flex}
    .result-loading .spinner{width:48px;height:48px;border:3px solid var(--warm);border-top-color:var(--gold);border-radius:50%;animation:spin 1s linear infinite;margin-bottom:20px}
    .result-loading h3{font-size:18px;color:var(--charcoal);margin-bottom:8px}
    .result-loading p{font-size:14px;color:var(--gray)}

    /* Footer */
    .footer{padding:48px;background:var(--charcoal);color:#fff;margin-top:60px}
    .footer-content{max-width:1100px;margin:0 auto;display:flex;justify-content:space-between;align-items:center}
    .footer-brand{display:flex;align-items:center;gap:8px}
    .footer-brand svg{width:24px;height:24px}
    .footer-brand span{font-family:'Playfair Display',serif;font-size:18px}
    .footer-links{display:flex;gap:24px}
    .footer-links a{color:rgba(255,255,255,.6);font-size:13px;transition:color .3s}
    .footer-links a:hover{color:#fff}
    .footer-copy{text-align:center;margin-top:24px;padding-top:20px;border-top:1px solid rgba(255,255,255,.1);font-size:11px;color:rgba(255,255,255,.4)}

    /* Toast */
    .toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%) translateY(100px);background:var(--charcoal);color:#fff;padding:14px 24px;border-radius:12px;font-size:14px;z-index:1000;transition:transform .3s;max-width:90%}
    .toast.show{transform:translateX(-50%) translateY(0)}
    .toast.success{background:#10b981}
    .toast.error{background:#ef4444}

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       RESPONSIVE
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @media(max-width:1024px){
      .nav{padding:0 32px}
      .hero{padding:100px 32px 28px}
      .main-container{padding:0 20px 50px}
    }

    @media(max-width:768px){
      .nav{padding:0 16px;height:64px}
      .nav-logo span{font-size:20px}
      .nav-menu{display:none}
      .hamburger{display:flex}
      
      .hero{padding:84px 16px 20px}
      .hero h1{font-size:28px}
      .hero p{font-size:14px}
      
      .main-container{padding:0 12px 40px}
      
      .chat-box{margin-bottom:24px}
      .chat-messages{height:120px}
      
      .category-grid{grid-template-columns:repeat(2,1fr);gap:10px;margin-bottom:24px}
      .category-card{padding:16px 10px}
      .category-icon{font-size:28px}
      .category-name{font-size:13px}
      .category-desc{font-size:10px}
      
      .style-selector{gap:8px;overflow-x:auto;flex-wrap:nowrap;justify-content:flex-start;padding:0 12px 8px;-webkit-overflow-scrolling:touch}
      .style-chip{padding:8px 14px;font-size:12px;flex-shrink:0}
      
      .action-buttons{flex-direction:column;gap:10px}
      .action-btn{max-width:100%;padding:14px 20px;font-size:14px}
      
      .wall-analysis-section{padding:20px}
      .layout-type-display .type{font-size:26px}
      .wall-grid{grid-template-columns:1fr}
      
      .result-section{padding:20px 16px}
      .result-grid{grid-template-columns:1fr}
      .result-card img{height:200px}
      .result-analysis{grid-template-columns:1fr}
      
      .footer{padding:32px 16px}
      .footer-content{flex-direction:column;gap:20px;text-align:center}
      .footer-links{flex-wrap:wrap;justify-content:center}
    }

    @media(max-width:480px){
      .nav{height:56px}
      .hero{padding:72px 12px 16px}
      .hero h1{font-size:24px}
      .category-grid{gap:8px}
      .category-icon{font-size:24px}
      .category-name{font-size:12px}
      .category-desc{display:none}
      .layout-type-display .type{font-size:22px}
      .result-card img{height:160px}
    }

    @media(hover:none){
      .category-card:hover{transform:none;box-shadow:none}
      .action-btn:hover:not(:disabled){transform:none}
    }

    @supports(padding:max(0px)){
      .nav{padding-left:max(16px,env(safe-area-inset-left));padding-right:max(16px,env(safe-area-inset-right))}
      .main-container{padding-left:max(12px,env(safe-area-inset-left));padding-right:max(12px,env(safe-area-inset-right))}
      .toast{bottom:max(24px,env(safe-area-inset-bottom))}
    }
  </style>
</head>
<body>
  <!-- SVG Symbols -->
  <svg style="display:none">
    <symbol id="icon-logo" viewBox="0 0 40 40"><path d="M20 4L4 12v16l16 8 16-8V12L20 4zm0 4l12 6-12 6-12-6 12-6zm-12 10l12 6 12-6v8l-12 6-12-6v-8z"/></symbol>
    <symbol id="icon-ai" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2M7.5 13A2.5 2.5 0 0 0 5 15.5 2.5 2.5 0 0 0 7.5 18a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 7.5 13m9 0a2.5 2.5 0 0 0-2.5 2.5 2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5z"/></symbol>
    <symbol id="icon-user" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></symbol>
    <symbol id="icon-send" viewBox="0 0 24 24"><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/></symbol>
    <symbol id="icon-sparkle" viewBox="0 0 24 24"><path d="M12 2l2.4 7.2L22 12l-7.6 2.8L12 22l-2.4-7.2L2 12l7.6-2.8L12 2z"/></symbol>
    <symbol id="icon-download" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/></symbol>
    <symbol id="icon-share" viewBox="0 0 24 24"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><path d="m8.59 13.51 6.83 3.98M15.41 6.51l-6.82 3.98"/></symbol>
  </svg>

  <!-- Navigation -->
  <nav class="nav">
    <a href="index.html" class="nav-logo">
      <svg fill="currentColor"><use href="#icon-logo"/></svg>
      <span>ë‹¤ë‹´</span>
    </a>
    <div class="nav-menu">
      <a href="index.html">About us</a>
      <a href="index.html">Collection</a>
      <a href="index.html">Products</a>
      <a href="ai-design.html" class="active">AI Design</a>
      <a href="index.html">Stories</a>
      <a href="index.html">Showroom</a>
      <a href="index.html">Service</a>
    </div>
    <div class="nav-icons">
      <button class="hamburger" onclick="toggleMobileMenu()" aria-label="ë©”ë‰´">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>

  <!-- Mobile Menu -->
  <div class="mobile-menu" id="mobileMenu">
    <a href="index.html">About us</a>
    <a href="index.html">Collection</a>
    <a href="index.html">Products</a>
    <a href="ai-design.html" class="active">AI Design</a>
    <a href="index.html">Stories</a>
    <a href="index.html">Showroom</a>
    <a href="index.html">Service</a>
  </div>

  <!-- Hero -->
  <section class="hero">
    <div class="hero-badge">
      <svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2"><use href="#icon-sparkle"/></svg>
      AI-Powered Design
    </div>
    <h1>AI <span>ì„¤ê³„</span> ì‹œìŠ¤í…œ</h1>
    <p>ì‚¬ì§„ í•œ ì¥ìœ¼ë¡œ ìƒˆë¡œìš´ ê³µê°„ì„ ë””ìì¸í•˜ì„¸ìš”</p>
  </section>

  <!-- Main Container -->
  <main class="main-container">
    
    <!-- AI Chat Box -->
    <div class="chat-box">
      <div class="chat-header">
        <div class="chat-header-icon">
          <svg><use href="#icon-ai"/></svg>
        </div>
        <div class="chat-header-text">
          <h3>ë‹¤ë‹´ AI ì„¤ê³„ì‚¬</h3>
          <p>ë§ì¶¤ ê°€êµ¬ ì„¤ê³„ ì „ë¬¸ AI</p>
        </div>
        <div class="chat-status">ì˜¨ë¼ì¸</div>
      </div>
      <div class="chat-messages" id="chatMessages">
        <div class="welcome-msg">
          <strong>ğŸ‘‹ ì•ˆë…•í•˜ì„¸ìš”!</strong>
          ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ê³  ì‚¬ì§„ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.
        </div>
      </div>
      <div class="chat-input">
        <input type="text" id="messageInput" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." onkeydown="if(event.key==='Enter')sendMessage()">
        <button onclick="sendMessage()" aria-label="ì „ì†¡">
          <svg fill="none" stroke="currentColor" stroke-width="2"><use href="#icon-send"/></svg>
        </button>
      </div>
    </div>

    <!-- Category Grid -->
    <p class="section-title">ì¹´í…Œê³ ë¦¬ ì„ íƒ</p>
    <div class="category-grid">
      <div class="category-card" data-category="sink" onclick="selectCategory('sink')">
        <img class="category-preview" id="preview-sink" src="" alt="">
        <span class="category-icon">ğŸ³</span>
        <div class="category-name">ì‹±í¬ëŒ€</div>
        <div class="category-desc">ì£¼ë°© ì‹±í¬ëŒ€ & ìƒí•˜ë¶€ì¥</div>
        <div class="category-upload-hint">ğŸ“· ì‚¬ì§„ ì—…ë¡œë“œ</div>
      </div>
      <div class="category-card" data-category="wardrobe" onclick="selectCategory('wardrobe')">
        <img class="category-preview" id="preview-wardrobe" src="" alt="">
        <span class="category-icon">ğŸ‘”</span>
        <div class="category-name">ë¶™ë°•ì´ì¥</div>
        <div class="category-desc">ì˜·ì¥ & ìˆ˜ë‚© ì‹œìŠ¤í…œ</div>
        <div class="category-upload-hint">ğŸ“· ì‚¬ì§„ ì—…ë¡œë“œ</div>
      </div>
      <div class="category-card" data-category="fridge" onclick="selectCategory('fridge')">
        <img class="category-preview" id="preview-fridge" src="" alt="">
        <span class="category-icon">ğŸ§Š</span>
        <div class="category-name">ëƒ‰ì¥ê³ ì¥</div>
        <div class="category-desc">ëƒ‰ì¥ê³ ì¥ & í‚¤í°ì¥</div>
        <div class="category-upload-hint">ğŸ“· ì‚¬ì§„ ì—…ë¡œë“œ</div>
      </div>
      <div class="category-card" data-category="vanity" onclick="selectCategory('vanity')">
        <img class="category-preview" id="preview-vanity" src="" alt="">
        <span class="category-icon">ğŸ’„</span>
        <div class="category-name">í™”ì¥ëŒ€</div>
        <div class="category-desc">ë“œë ˆì„œ & í™”ì¥ëŒ€</div>
        <div class="category-upload-hint">ğŸ“· ì‚¬ì§„ ì—…ë¡œë“œ</div>
      </div>
      <div class="category-card" data-category="shoe" onclick="selectCategory('shoe')">
        <img class="category-preview" id="preview-shoe" src="" alt="">
        <span class="category-icon">ğŸ‘Ÿ</span>
        <div class="category-name">ì‹ ë°œì¥</div>
        <div class="category-desc">í˜„ê´€ ì‹ ë°œì¥ & ìˆ˜ë‚©</div>
        <div class="category-upload-hint">ğŸ“· ì‚¬ì§„ ì—…ë¡œë“œ</div>
      </div>
      <div class="category-card" data-category="storage" onclick="selectCategory('storage')">
        <img class="category-preview" id="preview-storage" src="" alt="">
        <span class="category-icon">ğŸ“¦</span>
        <div class="category-name">ììœ  ìˆ˜ë‚©ì¥</div>
        <div class="category-desc">ë‹¤ìš©ë„ ìˆ˜ë‚© ê°€êµ¬</div>
        <div class="category-upload-hint">ğŸ“· ì‚¬ì§„ ì—…ë¡œë“œ</div>
      </div>
    </div>

    <!-- Hidden File Inputs -->
    <input type="file" class="file-input" id="file-sink" accept="image/*" onchange="handleFileUpload('sink', this)">
    <input type="file" class="file-input" id="file-wardrobe" accept="image/*" onchange="handleFileUpload('wardrobe', this)">
    <input type="file" class="file-input" id="file-fridge" accept="image/*" onchange="handleFileUpload('fridge', this)">
    <input type="file" class="file-input" id="file-vanity" accept="image/*" onchange="handleFileUpload('vanity', this)">
    <input type="file" class="file-input" id="file-shoe" accept="image/*" onchange="handleFileUpload('shoe', this)">
    <input type="file" class="file-input" id="file-storage" accept="image/*" onchange="handleFileUpload('storage', this)">

    <!-- Style Selector -->
    <div class="style-selector">
      <div class="style-chip active" data-style="ëª¨ë˜" onclick="selectStyle(this)">ğŸ¢ ëª¨ë˜</div>
      <div class="style-chip" data-style="ìŠ¤ì¹¸ë””ë‚˜ë¹„ì•ˆ" onclick="selectStyle(this)">ğŸŒ² ìŠ¤ì¹¸ë””ë‚˜ë¹„ì•ˆ</div>
      <div class="style-chip" data-style="ì¸ë”ìŠ¤íŠ¸ë¦¬ì–¼" onclick="selectStyle(this)">ğŸ­ ì¸ë”ìŠ¤íŠ¸ë¦¬ì–¼</div>
      <div class="style-chip" data-style="ë¯¸ë‹ˆë©€" onclick="selectStyle(this)">â—»ï¸ ë¯¸ë‹ˆë©€</div>
      <div class="style-chip" data-style="ëŸ­ì…”ë¦¬" onclick="selectStyle(this)">âœ¨ ëŸ­ì…”ë¦¬</div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         ACTION BUTTONS - ë²½ ë¶„ì„ + ë””ìì¸ ìƒì„±
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="action-buttons">
      <button class="action-btn analyze-btn" id="analyzeBtn" onclick="analyzeWalls()" disabled>
        ğŸ§± ë²½ êµ¬ì¡° ë¶„ì„
      </button>
      <button class="action-btn generate-btn" id="generateBtn" onclick="generateDesign()" disabled>
        âœ¨ AI ë””ìì¸ ìƒì„±
      </button>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         WALL ANALYSIS RESULT
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section class="wall-analysis-section" id="wallAnalysisSection">
      <div class="wall-header">
        <h2>ğŸ“ ë²½ êµ¬ì¡° ë¶„ì„ ê²°ê³¼ <span class="badge">Claude Vision</span></h2>
      </div>
      
      <!-- Layout Type -->
      <div class="layout-type-display">
        <div class="type" id="layoutType">-</div>
        <div class="label">ê³µê°„ ë ˆì´ì•„ì›ƒ</div>
      </div>
      
      <div class="wall-grid">
        <!-- Walls Info -->
        <div class="wall-card">
          <h4>ğŸ§± ë²½ë©´ ì •ë³´</h4>
          <div class="walls-list" id="wallsList"></div>
        </div>
        
        <!-- Recommendations -->
        <div class="wall-card recommendations-card">
          <h4>ğŸ’¡ ìºë¹„ë„· ë°°ì¹˜ ì¶”ì²œ</h4>
          <ul id="recommendationsList"></ul>
        </div>
        
        <!-- Obstacles -->
        <div class="wall-card">
          <h4>âš ï¸ ì¥ì• ë¬¼ / ì£¼ì˜ì‚¬í•­</h4>
          <p id="obstaclesList">-</p>
        </div>
        
        <!-- Analysis Notes -->
        <div class="wall-card">
          <h4>ğŸ“ ì¶”ê°€ ë¶„ì„</h4>
          <p id="analysisNotes">-</p>
        </div>
      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         DESIGN RESULT
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section class="result-section">
      <div class="result-header">
        <h2>ğŸ–¼ï¸ ë¦¬ë””ìì¸ ê²°ê³¼ <span>DALL-E 3</span></h2>
        <div class="result-actions">
          <button class="result-btn download" id="downloadBtn" onclick="downloadImage()" disabled>
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><use href="#icon-download"/></svg>
            ë‹¤ìš´ë¡œë“œ
          </button>
          <button class="result-btn share" id="shareBtn" onclick="shareResult()" disabled>
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><use href="#icon-share"/></svg>
            ê³µìœ 
          </button>
        </div>
      </div>

      <div class="result-placeholder" id="resultPlaceholder">
        <div class="icon">ğŸ¨</div>
        <h3>ë””ìì¸ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</h3>
        <p>ì¹´í…Œê³ ë¦¬ ì„ íƒ í›„ ì‚¬ì§„ì„ ì—…ë¡œë“œí•˜ê³  ìƒì„± ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”</p>
      </div>

      <div class="result-loading" id="resultLoading">
        <div class="spinner"></div>
        <h3>AIê°€ ë””ìì¸ ì¤‘...</h3>
        <p>ì•½ 20-30ì´ˆ ì†Œìš”</p>
      </div>

      <div class="result-content" id="resultContent">
        <div class="result-grid">
          <div class="result-card">
            <div class="result-card-header">
              <div class="dot before"></div>
              <span>Before - ì›ë³¸</span>
            </div>
            <img id="beforeImage" src="" alt="Before">
          </div>
          <div class="result-card">
            <div class="result-card-header">
              <div class="dot after"></div>
              <span>After - AI ë¦¬ë””ìì¸</span>
            </div>
            <img id="afterImage" src="" alt="After">
          </div>
          <div class="result-main-image">
            <img id="mainResultImage" src="" alt="Generated Design" onclick="window.open(this.src, '_blank')">
          </div>
          <div class="result-analysis">
            <div class="analysis-card">
              <h4>ğŸ“Š ê³µê°„ ë¶„ì„</h4>
              <p id="roomAnalysis">ë¶„ì„ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
            </div>
            <div class="analysis-card">
              <h4>ğŸ’¡ ë””ìì¸ ì œì•ˆ</h4>
              <p id="designSuggestions">ì œì•ˆ ì‚¬í•­ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <a href="index.html" class="footer-brand">
        <svg fill="currentColor"><use href="#icon-logo"/></svg>
        <span>ë‹¤ë‹´</span>
      </a>
      <div class="footer-links">
        <a href="index.html">í™ˆ</a>
        <a href="#">ì œí’ˆ</a>
        <a href="#">ì‹œê³µì‚¬ë¡€</a>
        <a href="#">ì‡¼ë£¸</a>
        <a href="#">ê³ ê°ì„¼í„°</a>
      </div>
    </div>
    <p class="footer-copy">Â© 2024 ë‹¤ë‹´ê°€êµ¬. All rights reserved.</p>
  </footer>

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // API URLs
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const N8N_CHAT_URL = 'https://dadam.app.n8n.cloud/webhook/chat';
    const N8N_INTERIOR_URL = 'https://dadam.app.n8n.cloud/webhook/interior-design';
    const N8N_WALL_ANALYSIS_URL = 'https://dadam.app.n8n.cloud/webhook/wall-analysis';
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // State
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const state = {
      selectedCategory: null,
      selectedStyle: 'ëª¨ë˜',
      uploadedImages: {},
      currentImage: null,
      currentImageType: 'image/jpeg',
      generatedImageUrl: null,
      wallAnalysis: null
    };

    const categoryNames = {
      sink: 'ì‹±í¬ëŒ€',
      wardrobe: 'ë¶™ë°•ì´ì¥',
      fridge: 'ëƒ‰ì¥ê³ ì¥',
      vanity: 'í™”ì¥ëŒ€',
      shoe: 'ì‹ ë°œì¥',
      storage: 'ììœ  ìˆ˜ë‚©ì¥'
    };

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // Mobile Menu
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function toggleMobileMenu() {
      const hamburger = document.querySelector('.hamburger');
      const mobileMenu = document.getElementById('mobileMenu');
      hamburger.classList.toggle('active');
      mobileMenu.classList.toggle('active');
      document.body.style.overflow = mobileMenu.classList.contains('active') ? 'hidden' : '';
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // Category & File Upload
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function selectCategory(category) {
      if (state.uploadedImages[category]) {
        setActiveCategory(category);
      } else {
        document.getElementById(`file-${category}`).click();
      }
    }

    function setActiveCategory(category) {
      document.querySelectorAll('.category-card').forEach(c => c.classList.remove('active'));
      document.querySelector(`[data-category="${category}"]`).classList.add('active');
      
      state.selectedCategory = category;
      state.currentImage = state.uploadedImages[category]?.base64;
      state.currentImageType = state.uploadedImages[category]?.type || 'image/jpeg';
      
      updateButtons();
      addChatMessage(`${categoryNames[category]} ì„ íƒë¨. ë²½ êµ¬ì¡°ë¥¼ ë¶„ì„í•˜ê±°ë‚˜ ë°”ë¡œ ë””ìì¸ì„ ìƒì„±í•  ìˆ˜ ìˆì–´ìš”!`, false);
    }

    function handleFileUpload(category, input) {
      const file = input.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = (e) => {
        const base64Full = e.target.result;
        const base64Data = base64Full.split(',')[1];
        
        state.uploadedImages[category] = {
          base64: base64Data,
          preview: base64Full,
          type: file.type || 'image/jpeg'
        };
        
        document.getElementById(`preview-${category}`).src = base64Full;
        document.querySelector(`[data-category="${category}"]`).classList.add('has-image');
        
        setActiveCategory(category);
        showToast(`${categoryNames[category]} ì´ë¯¸ì§€ ì—…ë¡œë“œ ì™„ë£Œ!`, 'success');
      };
      reader.readAsDataURL(file);
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // Style Selection
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function selectStyle(el) {
      document.querySelectorAll('.style-chip').forEach(c => c.classList.remove('active'));
      el.classList.add('active');
      state.selectedStyle = el.dataset.style;
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // Button State
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function updateButtons() {
      const hasImage = !!state.currentImage;
      document.getElementById('analyzeBtn').disabled = !hasImage;
      document.getElementById('generateBtn').disabled = !hasImage;
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // WALL ANALYSIS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    async function analyzeWalls() {
      if (!state.currentImage) {
        showToast('ì´ë¯¸ì§€ë¥¼ ë¨¼ì € ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.', 'error');
        return;
      }

      const btn = document.getElementById('analyzeBtn');
      const section = document.getElementById('wallAnalysisSection');
      
      btn.disabled = true;
      btn.innerHTML = '<div class="spinner"></div> ë¶„ì„ ì¤‘...';
      
      try {
        const response = await fetch(N8N_WALL_ANALYSIS_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            room_image: state.currentImage,
            image_type: state.currentImageType
          })
        });

        if (!response.ok) throw new Error(`HTTP ${response.status}`);

        let data = await response.json();
        if (Array.isArray(data)) data = data[0];

        console.log('Wall Analysis:', data);
        state.wallAnalysis = data;
        
        displayWallAnalysis(data);
        section.classList.add('active');
        section.scrollIntoView({ behavior: 'smooth', block: 'start' });
        
        addChatMessage(`ë²½ êµ¬ì¡° ë¶„ì„ ì™„ë£Œ! ${data.layout_type || 'ê³µê°„'} í˜•íƒœì…ë‹ˆë‹¤. ì¶”ì²œ ë°°ì¹˜: ${data.recommended_cabinet_walls?.join(', ') || 'ë¶„ì„ ê²°ê³¼ í™•ì¸'}`, false);
        showToast('ë²½ êµ¬ì¡° ë¶„ì„ ì™„ë£Œ!', 'success');

      } catch (error) {
        console.error('Wall Analysis Error:', error);
        showToast('ë²½ ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
      }

      btn.disabled = false;
      btn.innerHTML = 'ğŸ§± ë²½ êµ¬ì¡° ë¶„ì„';
      updateButtons();
    }

    function displayWallAnalysis(data) {
      // Layout Type
      document.getElementById('layoutType').textContent = data.layout_type || 'ë¶„ì„ ë¶ˆê°€';
      
      // Walls List
      const wallsList = document.getElementById('wallsList');
      if (data.walls && data.walls.length > 0) {
        wallsList.innerHTML = data.walls.map(wall => {
          const features = wall.features || {};
          return `
            <div class="wall-item">
              <div class="position">${getWallPositionKR(wall.position)} ë²½ë©´</div>
              <div class="features">
                <span class="feature ${features.has_window ? 'active' : ''}">ğŸªŸ ì°½ë¬¸</span>
                <span class="feature ${features.has_door ? 'active' : ''}">ğŸšª ë¬¸</span>
                <span class="feature ${features.has_outlet ? 'active' : ''}">ğŸ”Œ ì½˜ì„¼íŠ¸</span>
                <span class="feature ${features.has_pipe ? 'active' : ''}">ğŸ”§ ë°°ê´€</span>
              </div>
            </div>
          `;
        }).join('');
      } else {
        wallsList.innerHTML = '<p style="color:#999;font-size:13px;">ë²½ë©´ ì •ë³´ ì—†ìŒ</p>';
      }
      
      // Recommendations
      const recommendationsList = document.getElementById('recommendationsList');
      if (data.recommended_cabinet_walls && data.recommended_cabinet_walls.length > 0) {
        recommendationsList.innerHTML = data.recommended_cabinet_walls.map(wall => 
          `<li>${getWallPositionKR(wall)} ë²½ë©´ì— ìºë¹„ë„· ë°°ì¹˜ ì¶”ì²œ</li>`
        ).join('');
      } else {
        recommendationsList.innerHTML = '<li>ì¶”ì²œ ì •ë³´ ì—†ìŒ</li>';
      }
      
      // Obstacles
      const obstaclesList = document.getElementById('obstaclesList');
      obstaclesList.textContent = data.obstacles?.length > 0 
        ? data.obstacles.join(', ') 
        : 'ë°œê²¬ëœ ì¥ì• ë¬¼ ì—†ìŒ';
      
      // Analysis Notes
      document.getElementById('analysisNotes').textContent = data.analysis_notes || 'ì¶”ê°€ ë¶„ì„ ì •ë³´ ì—†ìŒ';
    }

    function getWallPositionKR(position) {
      const map = { 'left': 'ì¢Œì¸¡', 'front': 'ì •ë©´', 'right': 'ìš°ì¸¡', 'back': 'í›„ë©´' };
      return map[position?.toLowerCase()] || position || 'ì•Œ ìˆ˜ ì—†ìŒ';
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // DESIGN GENERATION
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    async function generateDesign() {
      if (!state.currentImage) {
        showToast('ì´ë¯¸ì§€ë¥¼ ë¨¼ì € ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.', 'error');
        return;
      }

      const btn = document.getElementById('generateBtn');
      const placeholder = document.getElementById('resultPlaceholder');
      const loading = document.getElementById('resultLoading');
      const content = document.getElementById('resultContent');

      btn.disabled = true;
      btn.innerHTML = '<div class="spinner"></div> ìƒì„± ì¤‘...';
      placeholder.classList.add('hidden');
      content.classList.remove('active');
      loading.classList.add('active');

      try {
        const response = await fetch(N8N_INTERIOR_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            room_image: state.currentImage,
            image_type: state.currentImageType,
            design_style: state.selectedStyle,
            additional_request: `${categoryNames[state.selectedCategory]} ë¦¬ë””ìì¸`
          })
        });

        if (!response.ok) throw new Error(`HTTP ${response.status}`);

        let data = await response.json();
        if (Array.isArray(data)) data = data[0];

        const previewUrl = state.uploadedImages[state.selectedCategory]?.preview;
        document.getElementById('beforeImage').src = previewUrl;
        document.getElementById('afterImage').src = data.generated_image?.url || '';
        document.getElementById('mainResultImage').src = data.generated_image?.url || '';
        document.getElementById('roomAnalysis').textContent = data.room_analysis || 'ë¶„ì„ ê²°ê³¼ ì—†ìŒ';
        document.getElementById('designSuggestions').textContent = data.design_suggestions || 'ì œì•ˆ ì—†ìŒ';

        state.generatedImageUrl = data.generated_image?.url;

        loading.classList.remove('active');
        content.classList.add('active');

        document.getElementById('downloadBtn').disabled = false;
        document.getElementById('shareBtn').disabled = false;

        addChatMessage(`${categoryNames[state.selectedCategory]} ë¦¬ë””ìì¸ ì™„ë£Œ! ì•„ë˜ì—ì„œ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.`, false);
        showToast('ë””ìì¸ ìƒì„± ì™„ë£Œ!', 'success');

        document.querySelector('.result-section').scrollIntoView({ behavior: 'smooth', block: 'start' });

      } catch (error) {
        console.error('Design Error:', error);
        loading.classList.remove('active');
        placeholder.classList.remove('hidden');
        showToast('ë””ìì¸ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
      }

      btn.disabled = false;
      btn.innerHTML = 'âœ¨ AI ë””ìì¸ ìƒì„±';
      updateButtons();
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // Download & Share
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function downloadImage() {
      if (!state.generatedImageUrl) return;
      const link = document.createElement('a');
      link.href = state.generatedImageUrl;
      link.target = '_blank';
      link.download = `dadam-${state.selectedCategory}-design.png`;
      link.click();
      showToast('ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì‹œì‘', 'success');
    }

    async function shareResult() {
      if (!state.generatedImageUrl) return;
      try {
        if (navigator.share) {
          await navigator.share({
            title: 'ë‹¤ë‹´ê°€êµ¬ AI ë¦¬ë””ìì¸',
            text: `${categoryNames[state.selectedCategory]}ë¥¼ "${state.selectedStyle}" ìŠ¤íƒ€ì¼ë¡œ ë¦¬ë””ìì¸í–ˆì–´ìš”!`,
            url: state.generatedImageUrl
          });
        } else {
          await navigator.clipboard.writeText(state.generatedImageUrl);
          showToast('URLì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        }
      } catch (e) {
        showToast('ê³µìœ í•˜ê¸° ì‹¤íŒ¨', 'error');
      }
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // Chat
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function addChatMessage(content, isUser = false) {
      const chatMessages = document.getElementById('chatMessages');
      const welcome = chatMessages.querySelector('.welcome-msg');
      if (welcome) welcome.remove();

      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${isUser ? 'user' : 'ai'}`;
      messageDiv.innerHTML = `
        <div class="message-avatar">
          <svg fill="${isUser ? 'none' : 'currentColor'}" stroke="${isUser ? 'currentColor' : 'none'}" stroke-width="2">
            <use href="#icon-${isUser ? 'user' : 'ai'}"/>
          </svg>
        </div>
        <div class="message-content">${content}</div>
      `;
      chatMessages.appendChild(messageDiv);
      chatMessages.scrollTop = chatMessages.scrollHeight;

      const messages = chatMessages.querySelectorAll('.message');
      if (messages.length > 4) messages[0].remove();
    }

    async function sendMessage() {
      const input = document.getElementById('messageInput');
      const message = input.value.trim();
      if (!message) return;

      addChatMessage(message, true);
      input.value = '';

      try {
        const response = await fetch(N8N_CHAT_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message })
        });
        const data = await response.json();
        addChatMessage(data.response || data.output || 'ì‘ë‹µì„ ì²˜ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.', false);
      } catch (error) {
        addChatMessage('ì¼ì‹œì ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', false);
      }
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // Toast
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function showToast(message, type = 'info') {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.className = `toast ${type} show`;
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // Init
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    document.addEventListener('DOMContentLoaded', updateButtons);
  </script>
</body>
</html>
