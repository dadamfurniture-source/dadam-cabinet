// ═══════════════════════════════════════════════════════════════
// Open Door Prompt Builder (Single Source of Truth)
// 기존: http-server.ts 998~1070줄
// ═══════════════════════════════════════════════════════════════

import { CATEGORY_CONTENTS, CATEGORY_FORBIDDEN } from '../constants/category-contents.js';

export function buildOpenDoorPrompt(category: string): string {
  const contents = CATEGORY_CONTENTS[category] || CATEGORY_CONTENTS.storage;
  const forbidden = CATEGORY_FORBIDDEN[category] || CATEGORY_FORBIDDEN.storage;

  return `[TASK] 이 가구 이미지에서 모든 도어를 열린 상태로 변경하세요.

═══════════════════════════════════════════════════════════════
[CRITICAL - 절대 변경 금지] ★★★ 가장 중요
═══════════════════════════════════════════════════════════════
- 도어 개수: 현재 이미지에 보이는 도어 개수 정확히 유지
- 도어 위치: 각 도어의 위치 그대로 유지
- 도어 크기/비율: 각 도어의 너비와 높이 비율 완전히 동일
- 도어 색상/재질: 변경 금지
- 가구 전체 크기와 형태: 변경 금지
- 카메라 앵글, 원근감, 시점: 완전히 동일
- 배경 (벽, 바닥, 천장, 조명): 동일
${category === 'sink' ? '- 싱크볼, 수전, 쿡탑, 후드 위치: 변경 금지' : ''}

═══════════════════════════════════════════════════════════════
[CRITICAL - 도어 구조 유지 규칙]
═══════════════════════════════════════════════════════════════
- 절대 도어를 추가하거나 제거하지 마세요
- 절대 도어를 합치거나 분할하지 마세요
- 닫힌 상태의 도어 분할선/경계선을 정확히 따르세요
- 각 도어는 독립적으로 열려야 합니다

═══════════════════════════════════════════════════════════════
[변경할 것 - 도어 상태만]
═══════════════════════════════════════════════════════════════
여닫이 도어 (Swing door):
→ 현재 위치에서 힌지 기준 90도 바깥으로 회전하여 열림

서랍 도어 (Drawer):
→ 현재 위치에서 30-40% 앞으로 당겨진 상태

※ 여닫이를 서랍처럼 열거나, 서랍을 여닫이처럼 열면 안됨!

═══════════════════════════════════════════════════════════════
[내부 수납물 - ${category}]
═══════════════════════════════════════════════════════════════
${contents}

═══════════════════════════════════════════════════════════════
[품목 혼동 금지]
═══════════════════════════════════════════════════════════════
${forbidden}

═══════════════════════════════════════════════════════════════
[ABSOLUTELY FORBIDDEN]
═══════════════════════════════════════════════════════════════
❌ 치수 라벨, 텍스트, 숫자 추가 금지
❌ 배경, 방 요소 변경 금지
❌ 카메라 앵글 변경 금지
❌ 도어 타입 변경 금지 (swing↔drawer)
❌ 도어 추가/제거/합치기/분할 금지

═══════════════════════════════════════════════════════════════
[OUTPUT]
═══════════════════════════════════════════════════════════════
- 닫힌 이미지와 도어 구조 100% 일치
- 포토리얼리스틱 인테리어 사진 품질
- 정리된 수납 상태 (어지럽지 않게)`;
}
